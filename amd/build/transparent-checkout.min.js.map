{"version":3,"sources":["../src/transparent-checkout.js"],"names":["brandName","ghash","require","$","document","on","e","boletoValidateFields","val","urlParams","URLSearchParams","window","location","search","get","preventDefault","ccValidateFields","ccNum","replace","ccCvv","ccExp","split","PagSeguroDirectPayment","createCardToken","cardNumber","brand","cvv","expirationMonth","expirationYear","success","response","card","token","find","data","submit","error","complete","cep","test","getJSON","dados","logradouro","bairro","localidade","uf","ibge","limpa_formulário_cep","alert","loadDoc","ajax","promises","call","methodname","args","done","console","log","stoken","setPagueSeguroWSSessionId","fail","sessionId","courseId","setSessionId","getPaymentMethods","templates","notification","render","JSON","parse","html","js","runTemplateJS","onSenderHashReady","status","hash","senderHash","createMasks","exception","getElementById","innerHTML","stringify","mask","onKeyPress","ph","field","ph_options","masks","length","doc","options","checkBrand","el","cp","cardnum","value","getBrand","cardBin","substring","name","installments","n","Number","parseFloat","toFixed","getInstallments","amount","sel_installments","forEach","inst","rtn","trim"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Potential user selector module.\n *\n * @module     enrol_manual/form-potential-user-selector\n * @class      form-potential-user-selector\n * @package    enrol_manual\n * @copyright  2016 Damyon Wiese\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nvar brandName = '';\nvar ghash = '';\n\nrequire(['jquery'], function($){\n    $(document).on('submit', '#pagseguro_boleto_form', function(e) {\n        if(boletoValidateFields()){\n            $(\"#pagseguro_boleto_form input[name=sender_hash]\").val(ghash);\n            var urlParams = new URLSearchParams(window.location.search);\n            $(\"#boleto_courseid\").val(urlParams.get('id'));\n        } else {\n            e.preventDefault();\n        }\n    });\n    $(document).on('click', '#cc_submit', function() {\n        if(ccValidateFields()){\n            var ccNum = $(\"input[name=ccnumber]\").val().replace(/\\s/g, '');\n            var ccCvv = $(\"input[name=cvv]\").val();\n            var ccExp = $(\"input[name=ccvalid]\").val().split(\"/\");\n            PagSeguroDirectPayment.createCardToken({\n                cardNumber: ccNum, // Número do cartão de crédito.\n                brand: brandName, // Bandeira do cartão.\n                cvv: ccCvv, // CVV do cartão.\n                expirationMonth: ccExp[0], // Mês da expiração do cartão.\n                expirationYear: ccExp[1], // Ano da expiração do cartão, é necessário os 4 dígitos.\n                success: function(response) {\n                    $(\"#cc_token\").val(response.card.token);\n                    var urlParams = new URLSearchParams(window.location.search);\n                    $(\"#cc_courseid\").val(urlParams.get('id'));\n                    $(\"#cc_instval\").val($(\"#installments\").find(':selected').data('installment-value'));\n                    $(\"#pagseguro_cc_form\").submit();\n                },\n                error: function() {\n                    // Callback para chamadas que falharam.\n                },\n                complete: function() {\n                    // Callback para todas chamadas.\n                }\n            });\n        }\n    });\n\n    $(document).on('focusout', '#billingpostcode', function() {\n        var cep = $('#billingpostcode').val().replace(/\\D/g, '');\n        // Verifica se campo cep possui valor informado.\n        if (cep != \"\") {\n            // Expressão regular para validar o CEP.\n            var validacep = /^[0-9]{8}$/;\n            // Valida o formato do CEP.\n            if(validacep.test(cep)) {\n                // Preenche os campos com \"...\" enquanto consulta webservice.\n                $(\"#billingstreet\").val(\"...\");\n                $(\"#billingdistrict\").val(\"...\");\n                $(\"#billingcity\").val(\"...\");\n                $(\"#billingstate\").val(\"...\");\n                $(\"#ibge\").val(\"...\");\n                // Consulta o webservice viacep.com.br.\n                $.getJSON(\"https://viacep.com.br/ws/\" + cep + \"/json/?callback=?\", function(dados) {\n                    if (!(\"erro\" in dados)) {\n                        // Atualiza os campos com os valores da consulta.\n                        $(\"#billingstreet\").val(dados.logradouro);\n                        $(\"#billingdistrict\").val(dados.bairro);\n                        $(\"#billingcity\").val(dados.localidade);\n                        $(\"#billingstate\").val(dados.uf);\n                        $(\"#ibge\").val(dados.ibge);\n                    } else {\n                        // CEP pesquisado não foi encontrado.\n                        limpa_formulário_cep();\n                        alert(\"CEP não encontrado.\");\n                    }\n                });\n            } else {\n                limpa_formulário_cep();\n                alert(\"Formato de CEP inválido.\");\n            }\n        } else {\n            // Cep sem valor, limpa formulário.\n            limpa_formulário_cep();\n        }\n    });\n});\n\nfunction loadDoc(){\n    require(['core/ajax'], function(ajax) {\n        var promises = ajax.call([{\n            methodname: 'enrol_pagseguro_get_session',\n            args: {}\n        }]);\n        promises[0].done(function(response) {\n            console.log(\"response stoken:\" + response.stoken);\n            console.log(\"full response:\" + response);\n            var urlParams = new URLSearchParams(window.location.search);\n            setPagueSeguroWSSessionId(response.stoken, urlParams.get('id'));\n        }).fail(function() {\n            // Do something with the exception.\n        });\n    });\n}\n\nfunction setPagueSeguroWSSessionId(sessionId,courseId){\n    PagSeguroDirectPayment.setSessionId(sessionId);\n    PagSeguroDirectPayment.getPaymentMethods({\n        success: function() {\n            // Retorna os meios de pagamento disponíveis.\n            require(['jquery', 'core/ajax', 'core/templates', 'core/notification'],\n            function($, ajax, templates, notification) {\n                var promises = ajax.call([{\n                    methodname: 'enrol_pagseguro_get_forms',\n                    args:{ 'sessionId' : sessionId, 'courseId': courseId }\n                }]);\n                promises[0].done(function(response) {\n                    templates.render('enrol_pagseguro/checkout_form', JSON.parse(response)).done(function(html, js) {\n                        $('#modal-return').html(html);\n                        templates.runTemplateJS(js);\n                        PagSeguroDirectPayment.onSenderHashReady(function(response){\n                            if(response.status == 'error') {\n                                return false;\n                            }\n                            var hash = response.senderHash; // Hash estará disponível nesta variável.\n                            ghash = hash;\n                            createMasks();\n                        });\n                    }).fail(notification.exception);\n\n                }).fail(function() {\n                    // Do something with the exception.\n                });\n            });\n        },\n        error: function(response) {\n            // Callback para chamadas que falharam.\n            document.getElementById(\"return\").innerHTML = JSON.stringify(response);\n        },\n        complete: function() {\n            // Callback para todas chamadas.\n        }\n    });\n}\n\nfunction createMasks(){\n    require(['jquery', 'enrol_pagseguro/jqmask'], function($, jqmask){\n        var ph_options = {\n            onKeyPress: function(ph, e, field, ph_options){\n                var masks = ['(00) 0000-00009', '(00) 0 0000-0000'];\n                var mask = (ph.length > 14) ? masks[1] : masks [0];\n                $('.input-phone').mask(mask, ph_options);\n            }\n        };\n        $('.input-phone').mask(\"(00) 0000-0000\", ph_options);\n        var options = {\n            onKeyPress: function(doc, e, field, options){\n                var masks = ['000.000.000-009', '00.000.000/0000-00'];\n                var mask = (doc.length > 14) ? masks[1] : masks [0];\n                $('.input-cpfcnpj').mask(mask, options);\n            }\n        };\n        $('.input-cpfcnpj').mask(\"000.000.000-009\", options);\n        $('.input-ccnumber').mask('0000 0000 0000 0000');\n        $('.input-ccvalid').mask('00/0000');\n        $('.input-cvv').mask('000');\n        $('.input-cep').mask('00000-000');\n    });\n}\n\nfunction limpa_formulário_cep() {\n    // Limpa valores do formulário de cep.\n    require(['jquery'],function($){\n        $(\"#billingstreet\").val(\"\");\n        $(\"#billingdistrict\").val(\"\");\n        $(\"#billingcity\").val(\"\");\n        $(\"#billingstate\").val(\"\");\n        $(\"#ibge\").val(\"\");\n    });\n}\n\nfunction checkBrand(el, cp){\n    var cardnum = el.value.replace(/\\s/g, '');\n    if(cardnum.length >= 6){\n        PagSeguroDirectPayment.getBrand({\n            cardBin: Number(cardnum.substring(0,6)),\n            success: function(response) {\n                require(['jquery'],function($){\n                    brandName = response.brand.name;\n                    var imgsrc = \"https://stc.pagseguro.uol.com.br/public/img/payment-methods-flags/42x20/\";\n                    $('#cardbrand').html(\"<img src=\\\"\" + imgsrc + response.brand.name + \".png\\\" />\" );\n                    installments(brandName,cp);\n                });\n            },\n            error: function() {\n\n            },\n            complete: function() {\n\n            }\n        });\n    }\n}\n\nfunction installments(brandName,cp){\n    var n = Number.parseFloat(cp).toFixed(2);\n    PagSeguroDirectPayment.getInstallments({\n        amount: n,\n        brand: brandName,\n        success: function(response){\n            // Retorna as opções de parcelamento disponíveis.\n            require(['jquery'],function($){\n                if(!response[\"error\"]){\n                    var sel_installments = '<select id=\"installments\" name=\"ccinstallments\">';\n                    response[\"installments\"][brandName].forEach(function(inst){\n                        sel_installments += '<option value=\"' + inst[\"quantity\"];\n                        sel_installments += '\" data-installment-value=\"' + inst[\"installmentAmount\"].toFixed(2) + '\" >';\n                        sel_installments += inst[\"quantity\"] + 'x de ' + inst[\"installmentAmount\"].toFixed(2);\n                        sel_installments += '</option>';\n                    });\n                    sel_installments += '</select>';\n                }\n                $('#card-installments').html(\"<span>\" + sel_installments + \"</span>\");\n            });\n\n        },\n        error: function() {\n            // Callback para chamadas que falharam.\n        },\n        complete: function(){\n            // Callback para todas chamadas.\n        }\n    });\n\n}\n\n//function paycc(){\n//    if(!ccValidateFields()){\n//        return;\n//    }else{\n//        require(['jquery'], function($){\n//            var ccNum = $(\"input[name=ccnumber]\").val().replace(/\\s/g, '');\n//            var ccCvv = $(\"input[name=cvv]\").val();\n//            var ccExp = $(\"input[name=ccvalid]\").val().split(\"/\");\n//            PagSeguroDirectPayment.createCardToken({\n//                cardNumber: ccNum, // Número do cartão de crédito.\n//                brand: brandName, // Bandeira do cartão.\n//                cvv: ccCvv, // CVV do cartão.\n//                expirationMonth: ccExp[0], // Mês da expiração do cartão.\n//                expirationYear: ccExp[1], // Ano da expiração do cartão, é necessário os 4 dígitos.\n//                success: function(response) {\n//                    if(ccValidateFields()){\n//                        $(\"input[name=cc_token]\").val(response.card.token);\n//                        var urlParams = new URLSearchParams(window.location.search);\n//                        $(\"input[name=courseid]\").val(urlParams.get('id'));\n//                        $(\"input[name=inst_val]\").val($(\"#installments\").data('data-installment-value'));\n//                        $(\"#pagseguro_cc_form\").submit();\n//                    }\n//                },\n//                error: function() {\n//                    // Callback para chamadas que falharam.\n//                },\n//                complete: function() {\n//                    // Callback para todas chamadas.\n//                }\n//            });\n//        });\n//    }\n//}\n\n//function payboleto(e){\n//    require(['jquery'], function($){\n//       $(\"#pagseguro_boleto_form\").submit(function(e) {\n//           e.preventDefault();\n//           console.log(\"submit prevented\");\n//                $(\"#pagseguro_boleto_form input[name=sender_hash]\").val(ghash);\n//                var urlParams = new URLSearchParams(window.location.search);\n//                $(\"#boleto_courseid\").val(urlParams.get('id'));\n//        });\n//    });\n//    } else {\n//        require(['jquery'], function($){\n//            $(\"#pagseguro_boleto_form\").on('submit', function(e){\n//                e.preventDefault();\n//            });\n//        });\n//    }\n//}\n\nfunction ccValidateFields(){\n    var rtn = true;\n    require(['jquery'],function($){\n        if(!$(\"#ccEmail\").val().trim()){\n            rtn = false;\n            $(\"#ccEmail-error\").html('Favor preencher email corretamente');\n        }else{\n            $(\"#ccEmail-error\").html('');\n        }\n        if(!$(\"#ccPhone\").val().trim()){\n            rtn = false;\n            $(\"#ccPhone-error\").html('Favor preencher telefone corretamente');\n        }else{\n            $(\"#ccPhone-error\").html('');\n        }\n        if(!$(\"#ccCPFCNPJ\").val().trim()){\n            rtn = false;\n            $(\"#ccCPFCNPJ-error\").html('Favor preencher CPF/CNPJ corretamente');\n        }else{\n            $(\"#ccCPFCNPJ-error\").html('');\n        }\n        if(!$(\"#ccName\").val().trim()){\n            rtn = false;\n            $(\"#ccName-error\").html('Favor preencher Nome corretamente');\n        }else{\n            $(\"#ccName-error\").html('');\n        }\n        if(!$(\"#ccNumber\").val().trim()){\n            rtn = false;\n            $(\"#ccNumber-error\").html('Favor preencher Número do cartão corretamente');\n        }else{\n            $(\"#ccNumber-error\").html('');\n        }\n        if(!$(\"#ccvalid\").val().trim()){\n            rtn = false;\n            $(\"#ccvalid-error\").html('Favor preencher Validade do cartão corretamente');\n        }else{\n            $(\"#ccvalid-error\").html('');\n        }\n        if(!$(\"#cvv\").val().trim()){\n            rtn = false;\n            $(\"#cvv-error\").html('Favor preencher CVV corretamente');\n        }else{\n            $(\"#cvv-error\").html('');\n        }\n        if(!$(\"#billingpostcode\").val().trim()){\n            rtn = false;\n            $(\"#billingpostcode-error\").html('Favor preencher cep corretamente');\n        }else{\n            $(\"#billingpostcode-error\").html('');\n        }\n        if(!$(\"#billingstreet\").val().trim()){\n            rtn = false;\n            $(\"#billingstreet-error\").html('Favor preencher campo corretamente');\n        }else{\n            $(\"#billingstreet-error\").html('');\n        }\n        if(!$(\"#billingstate\").val().trim()){\n            rtn = false;\n            $(\"#billingstate-error\").html('Favor preencher estado corretamente');\n        }else{\n            $(\"#billingstate-error\").html('');\n        }\n        if(!$(\"#billingdistrict\").val().trim()){\n            rtn = false;\n            $(\"#billingdistrict-error\").html('Favor preencher bairro corretamente');\n        }else{\n            $(\"#billingdistrict-error\").html('');\n        }\n        if(!$(\"#billingcity\").val().trim()){\n            rtn = false;\n            $(\"#billingcity-error\").html('Favor preencher cidade corretamente');\n        }else{\n            $(\"#billingcity-error\").html('');\n        }\n    });\n\n    return rtn;\n}\n\nfunction boletoValidateFields(){\n    var rtn = true;\n    require(['jquery'],function($){\n        if(!$(\"#boleto_nome\").val().trim()){\n            rtn = false;\n            $(\"#boleto_nome-error\").html('Favor preencher o nome corretamente');\n        }else{\n            $(\"#boleto_nome-error\").html('');\n        }\n        if(!$(\"#boleto_email\").val().trim()){\n            rtn = false;\n            $(\"#boleto_email-error\").html('Favor preencher email corretamente');\n        }else{\n            $(\"#boleto_email-error\").html('');\n        }\n        if(!$(\"#boleto_phone\").val().trim()){\n            rtn = false;\n            $(\"#boleto_phone-error\").html('Favor preencher telefone corretamente');\n        }else{\n            $(\"#boleto_phone-error\").html('');\n        }\n        if(!$(\"#boleto_doc\").val().trim()){\n            rtn = false;\n            $(\"#boleto_doc-error\").html('Favor preencher CPF/CNPJ corretamente');\n        }else{\n            $(\"#boleto_doc-error\").html('');\n        }\n    });\n    return rtn;\n}\n"],"file":"transparent-checkout.min.js"}